---
meta:
  postgresql_images:
  image: cfcommunity/postgresql-dev
  tag: latest

  release_versions:
    docker: (( merge ))
    postgresql_docker: (( merge ))
  job_templates:
    # run docker daemon
    - {name: docker, release: docker}
    # do not run postgresql_images template that installs embedded docker image
    # run containers (see properties.containers)
    - {name: containers, release: docker}

releases:
- name: docker
  version: (( grab meta.release_versions.docker ))
- name: postgresql-docker
  version: (( grab meta.release_versions.postgresql_docker ))

properties:
  containers:
    - name: postgresql
      image: (( grab meta.postgresql_images.image ))
      tag: (( grab meta.postgresql_images.tag ))
      command: ""
      bind_ports:
        - "514:514"
        - "9200:9200"
        - "9300:9300"
        - "5601:5601"
      bind_volumes:
        - "/data"
      memory: "1G"
